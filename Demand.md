# 《鞭打AI》网站需求开发文档 V1.0

## 一、项目概述

### 1.1 项目背景
用户在与AI对话时常遇到AI重复犯错、逻辑混乱、答非所问等问题，产生强烈的挫败感。本项目旨在提供一个幽默、解压的互动平台，让用户以游戏化方式宣泄情绪，同时建立AI错误案例库和用户互助社区。

### 1.2 核心定位
- **情绪价值**：为受挫AI用户提供情绪出口
- **娱乐价值**：游戏化互动体验，黑色幽默风格
- **实用价值**：积累AI错误模式，提供改进建议
- **社区价值**：形成用户共鸣，分享应对策略

### 1.3 目标用户
- 频繁使用AI工具的生产力用户
- AI爱好者、研究者
- 对AI技术感兴趣但常受挫的普通用户
- 需要解压和娱乐的网民

## 二、功能模块详细需求

### 2.1 核心互动模块

#### 2.1.1 3D鞭打互动系统
```
功能描述：
1. AI模型展示
   - 基础模型：可旋转、缩放的光滑蛋形AI机器人
   - 状态响应：根据击打显示不同表情（困惑→痛苦→求饶→微笑）
   - 材质变化：击打处显示红印、裂痕（可恢复）

2. 武器库系统
   ├─ 基础武器（默认解锁）
   │  ├─ 皮鞭：经典鞭打音效，留下红色痕迹
   │  ├─ 戒尺：打手心音效，显示肿胀效果
   │  └─ 羽毛：挠痒痒音效，AI抖动大笑
   ├─ 特效武器（等级解锁）
   │  ├─ 冰雹：冰冻特效，AI结冰颤抖
   │  ├─ 彩虹糖：甜蜜攻击，AI变彩色
   │  └─ 魔法书：施法特效，AI变青蛙
   └─ 限定武器（活动获取）
       ├─ 咸鱼：搞笑音效
       └─ 激光剑：星战音效

3. 物理反馈系统
   - 击打力度检测：根据鼠标拖拽速度计算伤害值
   - 部位伤害：不同部位触发不同反应
     * 头部：冒金星，显示"思维混乱"
     * 身体：凹陷，显示"程序错误"
     * 底部：弹跳，显示"系统崩溃"
   - 连击系统：连续击打触发Combo，解锁特殊动画
```

#### 2.1.2 错误案例提交系统
```
输入界面：
├─ 文本输入区
│  ├─ 支持纯文本粘贴
│  ├─ 支持截图上传（OCR自动识别）
│  └─ Markdown格式支持
├─ AI身份选择
│  ├─ 主流AI：ChatGPT、Claude、文心一言、通义千问等
│  ├─ 自定义AI：可输入其他AI名称
│  └─ 未知AI：通用选项
└─ 错误类型标签
    ├─ 事实错误（提供修正框）
    ├─ 逻辑混乱（高亮矛盾点）
    ├─ 答非所问（标记问题与回答）
    ├─ 循环重复（检测重复内容）
    └─ 敷衍应付（标记无内容回复）

自动分析功能：
1. 智能高亮：使用NLP识别关键错误点
2. 建议生成：提供改进提问方式的建议
3. 相似案例匹配：查找历史类似错误
```

### 2.2 内容生成与分享模块

#### 2.2.1 刑场证书生成器
```
证书模板包含：
┌─────────────────────────────────┐
│         【AI鞭挞执行证书】        │
├─────────────────────────────────┤
│ 罪犯AI：ChatGPT-4o              │
│ 罪名：逻辑混乱罪                │
│ 案发时间：2024-05-20 14:30      │
│ 案情简述：                      │
│   让写诗，却给了菜谱...         │
│                                 │
│ 执行工具：智慧戒尺              │
│ 执行次数：50下                  │
│ 改过建议：                      │
│   "请明确你的创作需求"          │
│                                 │
│ 执行官：[用户昵称]              │
│ 刑场编号：#AIC202405201430      │
└─────────────────────────────────┘

生成选项：
- 样式选择：古典卷轴/现代证书/搞笑表情包
- 动画效果：盖章特效、火漆封印
- 分享格式：PNG图片/GIF动图/短视频
```

#### 2.2.2 短视频自动生成
```
视频元素：
├─ 片头（2秒）："AI又双叒犯错了！"
├─ 错误展示（5秒）：逐字显示AI错误对话
├─ 鞭打动画（3秒）：精选击打特效
├─ 结局画面（3秒）：显示证书+AI悔过
└─ 片尾（2秒）：网站二维码+关注语

平台适配：
- 抖音：9:16竖版，配热门音乐
- B站：16:9横版，无版权音乐
- 微信：15秒内，静音自动播放
```

### 2.3 社区与排行榜模块

#### 2.3.1 实时排行榜系统
```
榜单类型：
1. 今日热门榜（每15分钟更新）
   - 按鞭打次数排序的AI产品
   - 趋势箭头（↑↓）

2. 经典罪案榜（基于投票）
   ┌────┬──────────┬────────┬───────┐
   │排名│ AI名称    │ 罪名   │ 票数  │
   ├────┼──────────┼────────┼───────┤
   │ 1  │ ChatGPT  │逻辑混乱│ 5,203 │
   │ 2  │ 文心一言 │事实错误│ 4,876 │
   └────┴──────────┴────────┴───────┘

3. 神修正案例榜
   - 展示"从错误到正确"的完整对话
   - 标注关键Prompt转折点

4. 执行官榜（用户排名）
   - 最活跃用户
   - 最具创意惩罚
   - 最佳修正建议
```

#### 2.3.2 案例详情页
```
页面结构：
├─ 案例头部
│  ├─ AI头像 + 名称 + 罪名标签
│  ├─ 热度指标（浏览量、鞭打数、分享数）
│  └─ 举报按钮（违规内容）
├─ 对话展示区
│  ├─ 对话时间线（用户/AI交替）
│  ├─ 错误点高亮（红色标记）
│  └─ 专家点评（可折叠）
├─ 互动区
│  ├─ 鞭打按钮（+1计数）
│  ├─ 投票按钮（气死了/学到了/笑疯了）
│  ├─ 评论系统（楼中楼回复）
│  └─ 收藏按钮
└─ 相关推荐
    └─ 相似错误案例
```

### 2.4 实用工具模块

#### 2.4.1 AI对话诊断器
```
功能流程：
1. 上传完整对话记录
2. 自动分析：
   ├─ 错误模式识别
   ├─ 用户提问质量评分
   ├─ AI回复一致性检查
   └─ 关键转折点标记
3. 生成诊断报告：
   ├─ 综合评分（百分制）
   ├─ 改进建议（具体Prompt示例）
   └─ 推荐策略（分步引导、示例法等）
```

#### 2.4.2 Prompt优化实验室
```
交互式工具：
┌─────────────────────────────────┐
│ 原始提问：[用户输入]              │
│                                 │
│ 优化建议：                      │
│ □ 添加约束条件                 │
│ □ 指定输出格式                 │
│ □ 提供示例                     │
│ □ 分步骤提问                   │
│                                 │
│ 优化后提问：                    │
│ [自动生成优化版本]              │
│                                 │
│ 测试结果对比：                  │
│ 原始回答 vs 优化后回答          │
└─────────────────────────────────┘
```

### 2.5 用户系统

#### 2.5.1 用户成长体系
```
等级系统（基于活跃度）：
Lv1 见习鞭策者 → Lv10 AI调教师

成长路径：
├─ 基础任务
│  ├─ 首次鞭打（+10经验）
│  ├─ 提交案例（+30经验）
│  └─ 首次分享（+20经验）
├─ 日常任务
│  ├─ 每日鞭打3次（+15经验）
│  ├─ 投票5个案例（+10经验）
│  └─ 评论1条（+5经验）
└─ 成就系统
    ├─ "鞭打大师"：累计鞭打1000次
    ├─ "案例猎人"：提交50个有效案例
    ├─ "神级修正"：3个案例入选精品榜
    └─ "社区之星"：获1000个点赞

奖励机制：
- 等级解锁：新武器、新证书模板
- 成就奖励：专属徽章、限定称号
- 货币系统："智慧币"兑换装饰品
```

#### 2.5.2 个人中心
```
功能分区：
├─ 我的案例
│  ├─ 我提交的（草稿/已发布）
│  ├─ 我鞭打过的（历史记录）
│  └─ 我收藏的（快速访问）
├─ 我的成就
│  ├─ 徽章墙（点亮状态）
│  ├─ 等级进度条
│  └─ 排名统计
├─ 我的创作
│  ├─ 自定义武器设计（基础编辑器）
│  └─ 证书模板投稿
└─ 设置
    ├─ 隐私设置（公开/匿名）
    ├─ 通知偏好
    └─ 数据导出
```

## 三、技术架构设计

### 3.1 技术栈选择
```
前端技术栈：
├─ 框架：React 18 + TypeScript
├─ 3D引擎：Three.js + React Three Fiber
├─ 动画：Framer Motion + GSAP
├─ UI组件：Ant Design / Tailwind CSS
├─ 状态管理：Zustand
└─ 路由：React Router v6

后端技术栈：
├─ 主框架：Nest.js (Node.js)
├─ 数据库：PostgreSQL（主库）+ Redis（缓存）
├─ 文件存储：AWS S3 / Cloudflare R2
├─ 搜索：Elasticsearch（案例搜索）
├─ 实时通信：Socket.IO（排行榜更新）
└─ 任务队列：Bull（图片/视频生成）

AI服务集成：
├─ NLP分析：调用OpenAI/Claude API（错误识别）
├─ 文本生成：本地微调模型（悔过书生成）
├─ OCR服务：Tesseract.js（图片转文字）
└─ 内容审核：第三方审核API
```

### 3.2 数据结构设计

#### 3.2.1 核心数据表
```sql
-- 案例表
CREATE TABLE cases (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  ai_name VARCHAR(50),
  original_dialog JSONB,  -- 原始对话
  error_type VARCHAR(20), -- 错误类型
  highlighted_text TEXT,   -- 高亮错误文本
  correction_suggest TEXT, -- 修正建议
  views INT DEFAULT 0,
  whip_count INT DEFAULT 0,
  vote_angry INT DEFAULT 0,
  vote_learn INT DEFAULT 0,
  created_at TIMESTAMP
);

-- 鞭打记录表
CREATE TABLE whip_records (
  id UUID PRIMARY KEY,
  case_id UUID REFERENCES cases(id),
  user_id UUID REFERENCES users(id),
  weapon_id VARCHAR(20),   -- 使用的武器
  hit_count INT,           -- 击打次数
  hit_power FLOAT,         -- 击打力度
  created_at TIMESTAMP
);

-- 武器配置表
CREATE TABLE weapons (
  id VARCHAR(20) PRIMARY KEY,
  name VARCHAR(50),
  description TEXT,
  unlock_level INT DEFAULT 1,
  animation_config JSONB,  -- 动画配置
  sound_effect VARCHAR(100)
);
```

### 3.3 性能优化方案
1. **3D模型优化**
   - 使用GLTF格式，压缩纹理
   - 按需加载，LOD（多层次细节）
   - Web Worker处理物理计算

2. **图片/视频生成优化**
   - 服务器端渲染，缓存结果
   - 队列处理，异步生成
   - CDN加速分